<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BloodTrack — 日次記録</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="topbar">
    <h1>BloodTrack — 日次記録</h1>
    <p class="sub">2026年1月1日から使えるシンプルな記録アプリ</p>
  </header>

  <main>
    <section class="form-area card">
      <div class="row head-row">
        <label>日付： <input type="date" id="date" /></label>
        <div class="btns">
          <button id="loadDraft">下書きを復元</button>
          <button id="saveDraft">下書き保存</button>
          <button id="save">保存</button>
        </div>
      </div>

      <div class="grid">
        <fieldset class="block">
          <legend>朝</legend>
          <label>体温 (℃)：<input type="number" step="0.1" id="morning_temp"></label>
          <label>リブレ (mg/dL)：<input type="number" id="morning_libre"></label>
          <label>単位：<input type="number" id="morning_unit"></label>
          <label>朝食後 (mg/dL)：<input type="number" id="morning_after"></label>
        </fieldset>

        <fieldset class="block">
          <legend>昼</legend>
          <label>昼食前 (mg/dL)：<input type="number" id="noon_before"></label>
          <label>リブレ (mg/dL)：<input type="number" id="noon_libre"></label>
          <label>単位：<input type="number" id="noon_unit"></label>
          <label>昼食後 (mg/dL)：<input type="number" id="noon_after"></label>
        </fieldset>

        <fieldset class="block">
          <legend>夜</legend>
          <label>夕食前 (mg/dL)：<input type="number" id="evening_before"></label>
          <label>リブレ (mg/dL)：<input type="number" id="evening_libre"></label>
          <label>単位：<input type="number" id="evening_unit"></label>
          <label>夕食後 (mg/dL)：<input type="number" id="evening_after"></label>
        </fieldset>

        <fieldset class="block">
          <legend>就寝・その他</legend>
          <label>就寝前 (mg/dL)：<input type="number" id="before_sleep"></label>
          <label>ランタス (単位)：<input type="number" id="lantus"></label>
          <label>朝血圧 上：<input type="number" id="bp_high"></label>
          <label>朝血圧 下：<input type="number" id="bp_low"></label>
          <label>備考：<input type="text" id="note"></label>
          <label>ルムジェブ残：<input type="number" id="lumjev_remain"></label>
          <label>ランタス残：<input type="number" id="lantus_remain"></label>
        </fieldset>
      </div>
    </section>

    <section class="list-area card">
      <h2>データ一覧</h2>
      <div id="counts"></div>
      <table id="dataTable">
        <thead>
          <tr>
            <th>日付</th><th>朝</th><th>昼</th><th>夜</th><th>就寝前</th><th>BP</th><th>残量</th><th>備考</th><th>操作</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="table-actions">
        <button id="exportCsv">CSVエクスポート</button>
        <button id="clearAll">全削除</button>
      </div>
    </section>

    <section class="report-area card">
      <h2>月次レポート</h2>
      <label>月を選択： <input type="month" id="reportMonth"></label>
      <div id="reportSummary"></div>
      <canvas id="chart" height="220"></canvas>
    </section>
  </main>

  <footer>BloodTrack — ローカル保存／PWA対応</footer>

  <script src="script.js"></script>
</body>
</html>
